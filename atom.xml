<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Savagejen's Octopress Blog]]></title>
  <link href="http://savagejen.github.io/atom.xml" rel="self"/>
  <link href="http://savagejen.github.io/"/>
  <updated>2013-04-28T23:33:30-05:00</updated>
  <id>http://savagejen.github.io/</id>
  <author>
    <name><![CDATA[Jen Savage]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Python Module Hijacking]]></title>
    <link href="http://savagejen.github.io/blog/2013/04/28/python-module-hijacking/"/>
    <updated>2013-04-28T23:03:00-05:00</updated>
    <id>http://savagejen.github.io/blog/2013/04/28/python-module-hijacking</id>
    <content type="html"><![CDATA[<p>Reading through documentation, I noticed a peculiarity about python: it&#8217;s susceptible to library hijacking attacks.</p>

<p>Open your python interpreter and type in:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>import sys
</span><span class='line'>print sys.path</span></code></pre></td></tr></table></div></figure>


<p>The result should be a list of paths that python will look in to find a module, in the order that python looks for them in. In other words, a pythonpath is the python equivalent of a DLL search path in windows.</p>

<p>You&#8217;ll note that the very first item on the list is &#8221;, which means your current working directory. So if you import io, the first place python will look for the io module is your current working directory.</p>

<p>Now, let&#8217;s say that someone places an io.py file in the same directory as your script. Now, the next time your script is run, it will load their version of io instead of yours. A user can essentially hijack the intended functionality of a module and replace it with their own, and all they need are write permissions to the same directory as your python script. For servers that offer shells to a variety of users, this type of attack could be used as a local privelege escalation on that box.</p>

<p>For example, here we have a script poc.py that opens a file (I know, not very useful, but it&#8217;s an example, so shhhh)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>import io
</span><span class='line'>
</span><span class='line'>io.open('spam.txt', 'w')</span></code></pre></td></tr></table></div></figure>


<p>If you place this script in the same directory as the following io.py file:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>def open(foo,bar):
</span><span class='line'>  print "Pining for the fjords?!"</span></code></pre></td></tr></table></div></figure>


<p>Then when you go to run poc.py, you will get the output &#8220;Pining for the fjords?!&#8221;</p>

<p>I sent this along to the python security team with a set of suggestions for fixing it. For one thing, I think the current working directory should be the last thing listed in the pythonpath by default. For another, python could provide a way for developers to specify the static path to their modules.</p>

<p>The python security team let me know that this attack is already well known to them, and they have something called isolation mode planned for a future version of python.</p>

<p>In the meantime, I&#8217;m told that you can configure virtualenv to only allow specific modules to be used by your python applications.</p>

<p>And sysadmins, please, <em>never</em> allow people to write to the same directories that your python scripts run out of.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Patsy Proxy]]></title>
    <link href="http://savagejen.github.io/blog/2013/04/28/the-patsy-proxy/"/>
    <updated>2013-04-28T22:56:00-05:00</updated>
    <id>http://savagejen.github.io/blog/2013/04/28/the-patsy-proxy</id>
    <content type="html"><![CDATA[<iframe width="420" height="315" src="http://www.youtube.com/embed/UrjrVcv2jsE" frameborder="0" allowfullscreen></iframe>


<p>The Patsy Proxy was a talk that I gave with Dan Crowley at Derbycon 2 and Defcon 20 Skytalks. It was recorded at Derbycon and is available to view via YouTube.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Uploaded my old Sparkl Motion code to github]]></title>
    <link href="http://savagejen.github.io/blog/2013/04/28/uploaded-my-old-sparkl-motion-code-to-github/"/>
    <updated>2013-04-28T22:42:00-05:00</updated>
    <id>http://savagejen.github.io/blog/2013/04/28/uploaded-my-old-sparkl-motion-code-to-github</id>
    <content type="html"><![CDATA[<p>Sparkl Motion was my first Arduino project. I used the input from an accelerometer to modify the rate of change of output via pwm to power a strand of LEDs on a necklace. The result were LEDs that &#8220;sparkled&#8221; quicker or slower depending on your movement.</p>

<object type="application/x-shockwave-flash" width="400" height="300" data="http://www.flickr.com/apps/video/stewart.swf?v=109786" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"> <param name="flashvars" value="intl_lang=en-us&photo_secret=ac66ef55cb&photo_id=4448899259"></param> <param name="movie" value="http://www.flickr.com/apps/video/stewart.swf?v=109786"></param> <param name="bgcolor" value="#000000"></param> <param name="allowFullScreen" value="true"></param><embed type="application/x-shockwave-flash" src="http://www.flickr.com/apps/video/stewart.swf?v=109786" bgcolor="#000000" allowfullscreen="true" flashvars="intl_lang=en-us&photo_secret=ac66ef55cb&photo_id=4448899259" height="300" width="400"></embed></object>


<p>(<a href="https://github.com/savagejen/Arduino/tree/master/sparklmotion">The arduino sketch has now been uploaded to my github account</a>).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[First Post!]]></title>
    <link href="http://savagejen.github.io/blog/2013/04/28/first-post/"/>
    <updated>2013-04-28T22:35:00-05:00</updated>
    <id>http://savagejen.github.io/blog/2013/04/28/first-post</id>
    <content type="html"><![CDATA[<p>Well, first post to this blog anyway. Since I gave up blogging in earnest ages ago, the purpose of this blog is to focus on tech rather than drivel on about life. If you want to hear me drivel on about life, check out: (<a href="https://twitter.com/savagejen">my twitter account</a>).</p>
]]></content>
  </entry>
  
</feed>
